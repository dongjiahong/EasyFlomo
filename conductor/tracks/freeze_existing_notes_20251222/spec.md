# 规格书：现有笔记的心流冷冻 (Freeze Existing Notes)

## 1. 概述
扩展“心流冷冻舱 (Flow Cryopod)”功能，允许用户对已经存在的笔记进行“冷冻”。用户可以从任何一条笔记卡片触发冷冻流程，将该笔记作为上下文背景，并补充当下的思维内存和逻辑快照。

## 2. 功能需求

### 2.1 UI 触发器
- **NoteCard 增强：** 在每条笔记卡片的工具栏（或悬浮状态下）添加 ❄️ “冷冻”图标。
- **视觉反馈：** 点击后，该笔记应进入“待冷冻”引导流程。

### 2.2 增强版冷冻对话框 (FreezeDialog)
- **双重视图 (Split View)：**
    - **上方参考区：** 显示原笔记的完整内容，方便用户回顾。
    - **下方输入区：** 提供“思维内存”、“逻辑快照”和“当前状态”的输入框。
- **数据处理：** AI 引导和优化逻辑应将“原笔记内容”作为上下文输入，生成更精准的存档。

### 2.3 存储与更新逻辑 (In-Place Transformation)
- **原地更新：** 
    - 更新笔记的 `isFrozen` 属性为 `true`。
    - 更新笔记的 `flowSnapshot` 元数据。
- **内容追加：** 在原笔记内容的下方，追加 AI 整理出的结构化存档（包含 🧠、⚡、🎭 图标的部分），中间使用分隔符（如 `---`）区分。

### 2.4 展示效果
- **看板同步：** 冷冻后的旧笔记将立即出现在“心流冷冻舱看板”中，作为最新的活跃上下文。
- **卡片样式：** 更新后的笔记卡片应立即应用“冷冻主题”（蓝色边框、冰冻图标）。

## 3. 验收标准
- [ ] 现有笔记卡片上出现 ❄️ 按钮。
- [ ] 点击按钮能打开带有原内容参考的 `FreezeDialog`。
- [ ] 保存后，笔记内容被成功追加了 AI 整理的存档。
- [ ] 笔记被标记为 `isFrozen: true` 并出现在置顶看板。
- [ ] 笔记卡片视觉样式变为冷冻主题。

## 4. 超出范围
- 将多条笔记合并为一个冷冻快照。
